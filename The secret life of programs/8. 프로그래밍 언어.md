# 8. 프로그래밍 언어
컴퓨터는 어떤 논리로 비트를 다루는가
<br>
```
[checkpoint]
- 프로그램을 기계에서 실행하기 위해 기계어로 (machine language) 어떻게 변환하는지
- 프로그램을 컴파일하거나 인터프리트하는 과정
```
<br>

### 어셈블리 언어
- 비트 조합 대신에 고안한 방법. 니모닉(mnemonics)을 통해 명령어를 쓸 수 있고, 주소에 이름(label)을 붙일 수 있으며, 코드에 주석을 달 수 있다.
- 어셈블러 : 어셈블리 언어로 작성된 코드를 읽어서 동등한 기계어 코드(machine code)를 생성해 주는 프로그램. 어셈블러는 변환 과정에서 레이블이나 심볼(symbol)의 값을 결정해 채워 넣어준다.
<br>

### 고수준 언어와 구조적 프로그래밍
- 어셈블리 언어보다 더 높은 추상화 단계에서 작동한다. 고수준 언어의 소스코드는 컴파일러(compiler)라는 프로그램에 의해 실행되며, 컴파일러는 소스코드를 기계어로 번역(compile) 해준다. 프로그램을 컴파일하고 나면 실행 준비가 완료된 것이다.
- 수천 가지 고수준 언어가 만들어졌다. 한 가지 예시는 포트란(FORTRAN)과 베이직과 같은 비구조적(unstructured) 언어인데, 이들 비구조적 언어는 GOTO와 레이블을 조합할 때 아무런 구조를 강요하지 않았다. 
- 그래서 잘못된 GOTO문 사용으로 발생할 수 있는 스파게티 코드 문제를 해결하기 위해 <b>구조적(structured)</b> 프로그래밍이 고안되었다.
<br>

### 어휘 분석
- 코드를 기호(문자들)로부터 단어와 같은 성격의 토큰(token)으로 변환하는 과정
- 간단해 보이는 문자열이나 부동소수점의 토큰 변환은 생각보다 어려운 과정이다. BNF(베커스-나우르 표기법), 상태 기계 등의 방법이 활용되었지만, 정규식이 현재는 대부분의 프로그래밍 언어에서 사용되고 있다.
- <b>정규식(regular expression) </b>이란, 언어를 지정하기 위한 언어를 정의하는 것이다. 정규식은 패턴 매칭(pattern matching)에서 중추적인 역할을 한다.
- 다만, 여러 단어를 모아 어떤 문법(grammer)에 맞는 문장으로 분석하는 과정이 필요하다. (단어에서 문장으로, keyword: yacc, 시프트-리듀스 파서(shift-reduce parser))
<br>
[IMAGE:정규식]
<br>

### 누구나 프로그래밍 언어를 만들 수 있는 시대
- 처음에는 '언어를 만들기 위해 고급 수학, 집합론을 공부해야 할' 정도로 프로그래밍 언어를 만들기가 어려웠지만, 구현법이 알려진 후에는 직접 간단하게 언어를 구현할 수 있게 되었다. lex, yacc, chem, pic 등이 고안되었다. 지금은 수많은 언어가 존재하며 대부분은 그다지 많은 가치를 더하지 않는다.
- 언어를 어떻게 구체적으로 응용할지 이해하고 싶다면 도메인 특화 언어(DSL, domain-specific language), 특히 pic 이나 chem과 같은 작은 언어(little languate)를 추천한다.
- "생각하는 프로그래밍(Programming Pearls), 인사이트, 2003" 도 살펴 볼 만한 책.
<br>

### 파스 트리
- 고수준의 언어는 컴파일과 인터프리트 모두 가능하다. 다만 그 선택은 언어 자체보다는 구현에 의해 이루어진다.
- 인터프리터 언어는 실제 기계에 사용할 기계어를 만들어내지 않고, 가상 머신에서 실행된다.
- 어떤 인터프리터 언어는 인터프리터에 의해 직접 실행되기도 하고, 나중에 해석될 수 있도록 중간어(intermediate language)로 컴파일되기도 한다.
- 일반적으로 컴파일러나 인터프리터는 파스 트리(parse tree)를 구성하는데 파스 트리는 언어(계산기 언어) 문법으로부터 만들어 낸 DAG(directed acylic graph) 데이터 구조이다.
<br>

### 인터프리터, 컴파일러
- 자바, 파이썬 같은 언어는 파스 트리를 파일에 저장했다가 나중에 읽어서 실행하는 방법을 사용한다. 이 때 파일에 저장되는 내용은 기계어 명령어들인데, 하드웨어가 아닌 소프트웨어로 구현된 기계의 명령어를 저장한다. 그리고 모든 대상 기계마다 저장된 파스 트리를 실행하는 프로그램이 있어야만 한다. 
- 컴파일러는 인터프리터와 비슷하나, 백엔드 실행 코드 대신 코드 생성기가 들어간다. 코드 생성기(code generator)는 특정 대상 기계에 대한 기계어 코드를 만들어낸다. 코드 생성기는 파스 트리 순회와 계산을 수행한다.
<br>
[IMAGE: 인터프리터, 컴파일러 구조]
<br>

### 최적화
- 대부분의 언어 도구에는 최적화기(optimizer)라는 추가 단계가 파스 트리와 코드 생성기 사이에 들어간다. 최적화기는 파스 트리를 분석하고 이 결과로 더 효율적인 코드를 생성해내도록 변환하는 것이다. 만약 최적화기가 코드 실행 전 분기로 들어간다면, 실행 시점에 따로 계산을 수행할 필요가 없게 만들 수도 있다.
- 하지만 하드웨어를 조작하는 코드를 최적화하면 예상하지 못한 문제가 발생할 수 있으므로 주의를 기울여야 한다.
- keyword : 루프 불변 요소(loop invariant), 강도 절감(strength reduction)

<br>
<br>
<br>
